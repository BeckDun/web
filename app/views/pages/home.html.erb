<!-- Hero Section with Carousel and Student Intro -->
<div class="bg-black">
  <div class="section-container py-16">
    <div class="grid md:grid-cols-2 gap-8 items-center">

      <!-- LEFT: Image Carousel (Bootstrap Style) -->
      <div class="carousel-container">
        <div id="heroCarousel" class="carousel slide event-carousel" data-bs-ride="carousel">
          <!-- Indicators -->
          <div class="carousel-indicators">
            <% @carousel_images.each_with_index do |item, index| %>
              <button type="button"
                      data-bs-target="#heroCarousel"
                      data-bs-slide-to="<%= index %>"
                      class="<%= 'active' if index == 0 %>"
                      aria-current="<%= 'true' if index == 0 %>"
                      aria-label="Slide <%= index + 1 %>"></button>
            <% end %>
          </div>

          <!-- Carousel Items -->
          <div class="carousel-inner">
            <% @carousel_images.each_with_index do |item, index| %>
              <div class="carousel-item <%= 'active' if index == 0 %>">
                <% if item[:type] == 'video' %>
                  <video class="d-block w-100 event-carousel-image"
                         controls
                         muted
                         loop
                         playsinline
                         alt="<%= item[:alt] %>">
                    <source src="<%= item[:url] %>" type="video/mp4">
                    Your browser does not support the video tag.
                  </video>
                <% else %>
                  <img src="<%= item[:url] %>"
                       class="d-block w-100 event-carousel-image"
                       alt="<%= item[:alt] %>">
                <% end %>
              </div>
            <% end %>
          </div>

          <!-- Controls -->
          <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>

        <!-- Social Links Below Carousel -->
        <div class="flex gap-6 mt-4" style="justify-content: center; width: 100%;">
          <% @social_links.each do |link| %>
            <a href="<%= link[:url] %>"
               target="<%= link[:platform] == 'Email' ? '_self' : '_blank' %>"
               rel="<%= link[:platform] == 'Email' ? '' : 'noopener noreferrer' %>"
               class="bio-social-icon-link"
               aria-label="<%= link[:platform] %>"
               style="color: #ffffff;">
              <i class="<%= link[:platform] == 'Email' ? 'fas' : 'fab' %> <%= link[:icon] %> text-4xl" style="color: #ffffff;"></i>
            </a>
          <% end %>
        </div>
      </div>

      <!-- RIGHT: Bio -->
      <div class="student-intro-section flex items-center justify-center">
        <div style="text-align: center;">
          <p class="text-xl mb-4" style="color: #9ca3af;">
            I'm a Research Assistant at UNM and HPC User Support at CARC. You can view my resume <%= link_to "here", resume_path, style: "color: #ffffff; text-decoration: underline;", onmouseover: "this.style.color='#e5e7eb'", onmouseout: "this.style.color='#ffffff'" %>.
          </p>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- Events Section with Photo Carousels -->
<div class="section-container">
  <h2 class="page-title">Events and Activities</h2>

  <% @events.each_with_index do |event, index| %>
    <div class="event-gallery-section mb-16">
      <!-- Event Header Card -->
      <div class="card mb-6">
        <div class="flex items-start justify-between mb-3">
          <div class="flex-1">
            <h3 class="text-2xl font-bold mb-2" style="color: #e5e7eb;"><%= event[:name] %></h3>
            <p class="text-sm mb-2 font-medium" style="color: #9ca3af;"><%= event[:full_name] %></p>
            <p class="mb-3" style="color: #9ca3af;"><%= event[:description] %></p>
          </div>
          <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ml-4" style="background-color: var(--color-primary-900); color: #9ca3af;">
            <%= event[:date] %>
          </span>
        </div>
        <div class="flex items-center justify-between">
          <div class="text-sm" style="color: #9ca3af;">
            <svg class="inline-block w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
            <%= event[:location] %>
          </div>
          <% if event[:url] %>
            <%= link_to event[:url], target: "_blank", class: "font-medium text-sm", style: "color: #9ca3af;", onmouseover: "this.style.color='#e5e7eb'", onmouseout: "this.style.color='#9ca3af'" do %>
              Learn More â†’
            <% end %>
          <% end %>
        </div>
      </div>

      <!-- Bootstrap Carousel for Event Photos (NO CAPTIONS) -->
      <% if event[:photos].present? %>
        <div id="eventCarousel<%= index %>" class="carousel slide event-carousel" data-bs-ride="carousel">
          <!-- Indicators -->
          <div class="carousel-indicators">
            <% event[:photos].each_with_index do |photo, photo_index| %>
              <button type="button"
                      data-bs-target="#eventCarousel<%= index %>"
                      data-bs-slide-to="<%= photo_index %>"
                      class="<%= 'active' if photo_index == 0 %>"
                      aria-current="<%= 'true' if photo_index == 0 %>"
                      aria-label="Slide <%= photo_index + 1 %>"></button>
            <% end %>
          </div>

          <!-- Carousel Items -->
          <div class="carousel-inner">
            <% event[:photos].each_with_index do |photo, photo_index| %>
              <div class="carousel-item <%= 'active' if photo_index == 0 %>">
                <img src="<%= photo[:url] %>"
                     class="d-block w-100 event-carousel-image"
                     alt="<%= photo[:alt] %>"
                     onerror="this.src='/images/photo1.jpg'">
              </div>
            <% end %>
          </div>

          <!-- Controls -->
          <button class="carousel-control-prev" type="button" data-bs-target="#eventCarousel<%= index %>" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#eventCarousel<%= index %>" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

